apiVersion: apps/v1
kind: Deployment
metadata:
  name: guacamole
spec:
  template:
    metadata:
      labels:
        policy.prplanit.com/ingress: "true"
    spec:
      securityContext:
        runAsUser: 1001
        runAsGroup: 1001
      initContainers:
        - name: generate-initdb
          image: docker.io/guacamole/guacamole@sha256:1b5be676d1fa0b4af21818312d4f9bcfae57c2359927ab3a186c79a941cf276e
        - name: init-db
          image: docker.io/postgres:15-alpine
      containers:
        - name: guacamole
          image: docker.io/guacamole/guacamole@sha256:1b5be676d1fa0b4af21818312d4f9bcfae57c2359927ab3a186c79a941cf276e
          resources:
            requests:
              cpu: "250m"
              memory: "512Mi"
            limits:
              cpu: "1000m"
              memory: "2Gi"
