apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: appflowy-postgres-init-sql
spec:
  secretStoreRef:
    kind: ClusterSecretStore
    name: vault-operationtimecapsule
  target:
    name: appflowy-postgres-init-sql
    template:
      engineVersion: v2
      data:
        # Static SQL - no secrets needed, just placeholder to satisfy ESO
        init.sql: |
          -- No init required - CloudNativePG creates appflowy user and database
        app-init.sql: |
          -- Create pgvector extension
          CREATE EXTENSION IF NOT EXISTS vector;
          -- Auth schema is owned by gotrue user (created during restore/migration)
  data: []
  dataFrom: []  # Override base - no Vault data needed
