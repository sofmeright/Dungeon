apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: nextcloud-elasticsearch
spec:
  template:
    spec:
      containers:
        - name: elasticsearch
          image: docker.io/library/elasticsearch:9.3.0
          env:
            - name: ES_JAVA_OPTS
              value: "-Xms1g -Xmx1g"
  volumeClaimTemplates:
    - metadata:
        name: data
      spec:
        accessModes:
          - ReadWriteOnce
        storageClassName: ceph-rbd
        resources:
          requests:
            storage: 5Gi
