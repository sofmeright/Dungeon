apiVersion: v1
kind: Service
metadata:
  name: ark-sa-tmc-theisland
  annotations:
    lbipam.cilium.io/ips: "172.22.30.231"
    lbipam.cilium.io/sharing-key: shooting-gallery
    lbipam.cilium.io/sharing-cross-namespace: "*"
    gatus.home-operations.com/endpoint: |
      group: "Game Servers (Shooting GalleryðŸŽ¯)"
      url: tcp://172.22.30.231:8777
      interval: 60s
      conditions:
        - "[CONNECTED] == true"
spec:
  type: LoadBalancer
  externalTrafficPolicy: Cluster
  sessionAffinity: ClientIP
  sessionAffinityConfig:
    clientIP:
      timeoutSeconds: 10800
  selector:
    app: ark-sa-tmc-theisland
  ports:
    - port: 8777
      targetPort: 8777
      protocol: UDP
      name: theisland-game-udp
    - port: 8777
      targetPort: 8777
      protocol: TCP
      name: theisland-game-tcp
    - port: 28020
      targetPort: 28020
      protocol: TCP
      name: theisland-rcon
    - port: 8778
      targetPort: 8778
      protocol: UDP
      name: theisland-query
