apiVersion: v1
kind: Service
metadata:
  name: plex
  namespace: operationtimecapsule
  annotations:
    lbipam.cilium.io/ips: "172.22.30.200"
    lbipam.cilium.io/sharing-key: "media-services"
    lbipam.cilium.io/sharing-cross-namespace: "*"
spec:
  type: LoadBalancer
  externalTrafficPolicy: Cluster
  selector:
    app: plex
  ports:
  - port: 32400
    targetPort: 32400
    protocol: TCP
    name: plex
  - port: 8324
    targetPort: 8324
    protocol: TCP
    name: roku-companion
  - port: 32469
    targetPort: 32469
    protocol: TCP
    name: dlna-tcp
  - port: 1900
    targetPort: 1900
    protocol: UDP
    name: dlna-udp
  - port: 32410
    targetPort: 32410
    protocol: UDP
    name: gdm-1
  - port: 32412
    targetPort: 32412
    protocol: UDP
    name: gdm-2
  - port: 32413
    targetPort: 32413
    protocol: UDP
    name: gdm-3
  - port: 32414
    targetPort: 32414
    protocol: UDP
    name: gdm-4