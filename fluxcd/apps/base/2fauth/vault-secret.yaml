apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: 2fauth-secrets
spec:
  refreshInterval: 5m
  secretStoreRef:
    name: vault-zeldas-letter
    kind: ClusterSecretStore
  target:
    name: 2fauth-secrets
    template:
      type: Opaque
      data:
        site_owner: "{{ .site_owner | toString }}"
        app_key: "{{ .app_key | toString }}"
        smtp_user: "{{ .smtp_user | toString }}"
        smtp_password: "{{ .smtp_password | toString }}"
        smtp_from: "{{ .smtp_from | toString }}"
        openid_client_id: "{{ .openid_client_id | toString }}"
        openid_client_secret: "{{ .openid_client_secret | toString }}"
  dataFrom:
    - extract:
        key: apps/2fauth
