apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: linkwarden-app-secrets
spec:
  refreshInterval: 5m
  secretStoreRef:
    name: vault-operationtimecapsule
    kind: ClusterSecretStore
  target:
    name: linkwarden-app-secrets
    template:
      type: Opaque
      data:
        nextauth-secret: "{{ .nextauth_secret | toString }}"
        postgres-password: "{{ .postgres_password | toString }}"
        meili-master-key: "{{ .meili_master_key | toString }}"
        zitadel-client-id: "{{ .zitadel_client_id | toString }}"
        zitadel-client-secret: "{{ .zitadel_client_secret | toString }}"
  dataFrom:
    - extract:
        key: apps/linkwarden