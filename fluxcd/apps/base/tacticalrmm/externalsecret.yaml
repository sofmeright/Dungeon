apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: tacticalrmm-secrets
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: PLACEHOLDER_SECRET_STORE
    kind: ClusterSecretStore
  target:
    name: tacticalrmm-secrets
    creationPolicy: Owner
  data:
    # PostgreSQL
    - secretKey: POSTGRES_USER
      remoteRef:
        key: apps/tacticalrmm
        property: POSTGRES_USER
    - secretKey: POSTGRES_PASS
      remoteRef:
        key: apps/tacticalrmm
        property: POSTGRES_PASS
    # MongoDB
    - secretKey: MONGODB_USER
      remoteRef:
        key: apps/tacticalrmm
        property: MONGODB_USER
    - secretKey: MONGODB_PASSWORD
      remoteRef:
        key: apps/tacticalrmm
        property: MONGODB_PASSWORD
    # MeshCentral
    - secretKey: MESH_USER
      remoteRef:
        key: apps/tacticalrmm
        property: MESH_USER
    - secretKey: MESH_HOST
      remoteRef:
        key: apps/tacticalrmm
        property: MESH_HOST
    - secretKey: MESH_PASS
      remoteRef:
        key: apps/tacticalrmm
        property: MESH_PASS
    # Django
    - secretKey: DJANGO_SECRET_KEY
      remoteRef:
        key: apps/tacticalrmm
        property: DJANGO_SECRET_KEY
    # App hosts
    - secretKey: APP_HOST
      remoteRef:
        key: apps/tacticalrmm
        property: APP_HOST
    - secretKey: API_HOST
      remoteRef:
        key: apps/tacticalrmm
        property: API_HOST
    # TRMM admin
    - secretKey: TRMM_USER
      remoteRef:
        key: apps/tacticalrmm
        property: TRMM_USER
    - secretKey: TRMM_PASS
      remoteRef:
        key: apps/tacticalrmm
        property: TRMM_PASS
