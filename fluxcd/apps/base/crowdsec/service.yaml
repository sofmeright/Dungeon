apiVersion: v1
kind: Service
metadata:
  name: crowdsec
  labels:
    app: crowdsec
    component: engine
spec:
  type: ClusterIP
  ports:
  - name: api
    port: 8080
    targetPort: 8080
    protocol: TCP
  - name: prometheus
    port: 6060
    targetPort: 6060
    protocol: TCP
  selector:
    app: crowdsec
    component: engine
---
apiVersion: v1
kind: Service
metadata:
  name: crowdsec-dashboard
  labels:
    app: crowdsec-dashboard
    component: dashboard
spec:
  type: LoadBalancer
  ports:
  - name: http
    port: 3000
    targetPort: 3000
    protocol: TCP
  selector:
    app: crowdsec-dashboard
    component: dashboard
---
apiVersion: v1
kind: Service
metadata:
  name: crowdsec-cloudflare-bouncer
  labels:
    app: crowdsec-cloudflare-bouncer
    component: bouncer
spec:
  type: ClusterIP
  ports:
  - name: metrics
    port: 2112
    targetPort: 2112
    protocol: TCP
  selector:
    app: crowdsec-cloudflare-bouncer
    component: bouncer
