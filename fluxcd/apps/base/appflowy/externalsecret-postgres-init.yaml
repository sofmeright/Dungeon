apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: appflowy-postgres-init-sql
spec:
  refreshInterval: 1h
  secretStoreRef:
    kind: ClusterSecretStore
    name: PLACEHOLDER_SECRET_STORE
  target:
    name: appflowy-postgres-init-sql
    template:
      data:
        init.sql: |
          -- No init required - CloudNativePG creates appflowy user and database
        app-init.sql: |
          -- Create pgvector extension (matches Helm chart setup)
          CREATE EXTENSION IF NOT EXISTS vector;
  dataFrom:
  - extract:
      key: PLACEHOLDER_VAULT_KEY
