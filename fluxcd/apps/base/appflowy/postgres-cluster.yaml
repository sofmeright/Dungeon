apiVersion: postgresql.cnpg.io/v1
kind: Cluster
metadata:
  name: kai-appflowy-postgres
spec:
  instances: PLACEHOLDER_INSTANCES

  postgresql:
    parameters:
      shared_buffers: "PLACEHOLDER_SHARED_BUFFERS"
      max_connections: "PLACEHOLDER_MAX_CONNECTIONS"

  bootstrap:
    initdb:
      database: PLACEHOLDER_DB_NAME
      owner: PLACEHOLDER_DB_USER
      secret:
        name: appflowy-secrets

  storage:
    pvcTemplate:
      accessModes:
        - ReadWriteOnce
      resources:
        requests:
          storage: PLACEHOLDER_STORAGE_SIZE
      storageClassName: ""
      selector:
        matchLabels:
          owner: kai
          app: appflowy
          purpose: postgres
          provisioning: static
