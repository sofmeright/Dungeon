apiVersion: v1
kind: ConfigMap
metadata:
  name: frigate-config
data:
  config.yaml: |
    # Frigate Base Configuration
    # Camera-specific config added via overlay patches
    # UI-managed settings (zones, masks, filters) stored in frigate.db

    version: 0.14-0

    mqtt:
      enabled: false

    # ONNX detector with TensorRT auto-detection (via -tensorrt image)
    detectors:
      onnx:
        type: onnx

    # YOLOx model - downloaded by init container
    model:
      model_type: yolox
      width: 640
      height: 640
      input_tensor: nchw
      input_pixel_format: rgb
      input_dtype: float
      path: /config/model_cache/yolox_s.onnx
      labelmap_path: /labelmap.txt

    # Default ffmpeg settings - can be overridden per camera
    ffmpeg:
      hwaccel_args: preset-nvidia-h264

    # Global detect defaults
    detect:
      enabled: true
      width: 1280
      height: 720
      fps: 5

    # Global record defaults
    record:
      enabled: true
      retain:
        days: 7
        mode: motion
      alerts:
        retain:
          days: 14
          mode: motion
      detections:
        retain:
          days: 14
          mode: motion

    # Global snapshots defaults
    snapshots:
      enabled: true
      retain:
        default: 14

    # Cameras defined in overlay
    cameras: {}
