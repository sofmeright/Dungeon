apiVersion: v1
kind: ConfigMap
metadata:
  name: netbird-management-config
  labels:
    app: netbird
    component: management
data:
  management.json: |
    {
      "Stuns": [
        {
          "Proto": "udp",
          "URI": "stun:stun.netbird.io:3478",
          "Username": "",
          "Password": null
        }
      ],
      "TURNConfig": {
        "Turns": [
          {
            "Proto": "udp",
            "URI": "turn:netbird.prplanit.com:3478",
            "Username": "netbird",
            "Password": "PLACEHOLDER_TURN_PASSWORD"
          }
        ],
        "CredentialsTTL": "12h",
        "Secret": "PLACEHOLDER_TURN_SECRET",
        "TimeBasedCredentials": false
      },
      "Signal": {
        "Proto": "https",
        "URI": "netbird.prplanit.com:443",
        "Username": "",
        "Password": null
      },
      "Relay": {
        "Addresses": ["rels://netbird.prplanit.com:443"],
        "CredentialsTTL": "12h"
      },
      "Datadir": "/var/lib/netbird",
      "StoreConfig": {
        "Engine": "postgres"
      },
      "HttpConfig": {
        "Address": "0.0.0.0:443",
        "AuthIssuer": "https://sso.prplanit.com",
        "AuthAudience": "305223206304813058",
        "AuthKeysLocation": "",
        "OIDCConfigEndpoint": "https://sso.prplanit.com/.well-known/openid-configuration",
        "IdpSignKeyRefreshEnabled": true
      },
      "IdpManagerConfig": {
        "ManagerType": "zitadel",
        "ClientConfig": {
          "Issuer": "https://sso.prplanit.com",
          "TokenEndpoint": "https://sso.prplanit.com/oauth/v2/token",
          "ClientID": "305223206304813058",
          "ClientSecret": "PLACEHOLDER_CLIENT_SECRET",
          "GrantType": "client_credentials"
        },
        "ExtraConfig": null,
        "Auth0ClientCredentials": null,
        "AzureClientCredentials": null,
        "KeycloakClientCredentials": null,
        "ZitadelClientCredentials": {
          "ClientID": "305223206304813058",
          "ClientSecret": "PLACEHOLDER_CLIENT_SECRET",
          "GrantType": "client_credentials"
        }
      },
      "DeviceAuthorizationFlow": {
        "Provider": "hosted",
        "ProviderConfig": {
          "Audience": "305223206304813058",
          "ClientID": "305223206304813058",
          "ClientSecret": "PLACEHOLDER_CLIENT_SECRET",
          "TokenEndpoint": "https://sso.prplanit.com/oauth/v2/token",
          "DeviceAuthEndpoint": "https://sso.prplanit.com/oauth/v2/device_authorization",
          "AuthorizationEndpoint": "",
          "Scope": "openid",
          "UseIDToken": false,
          "RedirectURLs": null
        }
      },
      "PKCEAuthorizationFlow": {
        "ProviderConfig": {
          "Audience": "305223206304813058",
          "ClientID": "305223206304813058",
          "ClientSecret": "",
          "TokenEndpoint": "https://sso.prplanit.com/oauth/v2/token",
          "AuthorizationEndpoint": "https://sso.prplanit.com/oauth/v2/authorize",
          "Scope": "openid profile email offline_access api",
          "RedirectURLs": ["http://localhost:53000/"]
        }
      }
    }
