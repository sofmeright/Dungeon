apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - ../../../base/cilium
  - httproute-xylem.yaml

patches:
  - path: helmrelease-patch.yaml
    target:
      kind: HelmRelease
      name: cilium
  - target:
      kind: HelmRelease
      name: cilium
    patch: |-
      - op: add
        path: /metadata/namespace
        value: flux-system
  - target:
      kind: HelmRepository
      name: cilium
    patch: |-
      - op: add
        path: /metadata/namespace
        value: flux-system
  - path: service-hubble-ui-ingress-patch.yaml
    target:
      kind: Service
      name: hubble-ui
