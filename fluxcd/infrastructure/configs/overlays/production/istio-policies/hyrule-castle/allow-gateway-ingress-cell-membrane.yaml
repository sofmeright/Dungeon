# DERIVED: ports from HTTPRoute backendRefs targeting this namespace.
# Inputs: kubectl get httproutes.gateway.networking.k8s.io -A -o json
# Key: (gateway parentRef -> {xylem|phloem|cell-membrane}) + backendRef.port
# Regenerate; do not hand-edit.
apiVersion: security.istio.io/v1
kind: AuthorizationPolicy
metadata:
  name: allow-gateway-ingress-cell-membrane
spec:
  selector:
    matchLabels:
      policy.prplanit.com/ingress: "true"
  action: ALLOW
  rules:
    - from:
        - source:
            principals:
              - cluster.local/ns/hyrule-castle/sa/cell-membrane-gateway-istio
      to:
        - operation:
            ports: ["80", "443", "3000", "6875", "7443", "8085", "8181", "8442", "9000", "40118"]
