# DERIVED: ports from HTTPRoute backendRefs targeting this namespace.
# Inputs: kubectl get httproutes.gateway.networking.k8s.io -A -o json
# Key: (gateway parentRef -> {xylem|phloem|cell-membrane}) + backendRef.port
# Regenerate; do not hand-edit.
apiVersion: security.istio.io/v1
kind: AuthorizationPolicy
metadata:
  name: allow-gateway-ingress-xylem
spec:
  selector:
    matchLabels:
      policy.prplanit.com/ingress: "true"
  action: ALLOW
  rules:
    - from:
        - source:
            principals:
              - cluster.local/ns/arylls-lookout/sa/xylem-gateway-istio
      to:
        - operation:
            ports: ["80", "324", "3142", "8082", "8184", "9000"]
