# Allow ingress traffic from Traefik gateways to all app namespaces
# This policy allows Traefik (in king-of-red-lions) to reach backend services
#
# Note: king-of-red-lions is NOT in the mesh (it's the Istio namespace)
# so this uses source.namespaces for non-mesh traffic
apiVersion: security.istio.io/v1
kind: AuthorizationPolicy
metadata:
  name: allow-gateway-ingress
  namespace: istio-system  # Mesh-wide policy
spec:
  action: ALLOW
  rules:
    # Allow traffic from Traefik namespace
    - from:
        - source:
            namespaces: ["king-of-red-lions"]
      to:
        - operation:
            # Common HTTP/HTTPS ports
            ports: ["80", "443", "8080", "8443", "3000", "5000", "9000"]
