# DERIVED: ports from HTTPRoute backendRefs targeting this namespace.
# Inputs: kubectl get httproutes.gateway.networking.k8s.io -A -o json
# Key: (gateway parentRef -> {xylem|phloem|cell-membrane}) + backendRef.port
# Regenerate; do not hand-edit.
apiVersion: security.istio.io/v1
kind: AuthorizationPolicy
metadata:
  name: allow-gateway-ingress-cell-membrane
spec:
  selector:
    matchLabels:
      policy.prplanit.com/ingress: "true"
  action: ALLOW
  rules:
    - from:
        - source:
            principals:
              - cluster.local/ns/hyrule-castle/sa/cell-membrane-gateway-istio
      to:
        - operation:
            ports: ["80", "3000", "3002", "7867", "8080", "8083", "8096", "9980", "11000", "32400"]
