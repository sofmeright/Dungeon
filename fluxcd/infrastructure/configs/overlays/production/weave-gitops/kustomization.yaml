apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - weave-gitops-secret.enc.yaml
  - weave-gitops-values.yaml
  - rbac.yaml

patches:
  - target:
      kind: ConfigMap
      name: weave-gitops-values
    patch: |-
      - op: replace
        path: /metadata/namespace
        value: flux-system
  - target:
      kind: Secret
      name: weave-gitops-admin-secret
    patch: |-
      - op: replace
        path: /metadata/namespace
        value: zeldas-lullaby
  - target:
      kind: ClusterRoleBinding
      name: weave-gitops-readonly
    patch: |-
      - op: replace
        path: /subjects/0/namespace
        value: zeldas-lullaby
