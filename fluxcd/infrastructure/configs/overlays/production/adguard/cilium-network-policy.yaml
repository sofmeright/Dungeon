apiVersion: cilium.io/v2
kind: CiliumNetworkPolicy
metadata:
  name: adguard-dns-egress
  namespace: prplanit-dns
spec:
  endpointSelector:
    matchLabels:
      app: adguard
  egress:
  # Allow ALL egress traffic - completely unrestricted
  - toEntities:
    - all
  - toCIDR:
    - 0.0.0.0/0
  - toCIDRSet:
    - cidr: 0.0.0.0/0
  # Also explicitly allow the local network
  - toCIDR:
    - 172.22.144.0/24
  - toCIDR:
    - 172.22.0.0/16
  # Allow all cluster-internal traffic
  - toEntities:
    - cluster
    - host
    - remote-node
  ingress:
  # Allow all ingress traffic
  - fromEntities:
    - all
  - fromCIDR:
    - 0.0.0.0/0