apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: ceph-rbd-templated
provisioner: rbd.csi.ceph.com
parameters:
  clusterID: "0985467c-d8f3-4483-b27f-f0a512397ec2"
  pool: "dungeon"
  imageFeatures: layering
  csi.storage.k8s.io/provisioner-secret-name: ceph-secret
  csi.storage.k8s.io/provisioner-secret-namespace: kube-system
  csi.storage.k8s.io/controller-expand-secret-name: ceph-secret
  csi.storage.k8s.io/controller-expand-secret-namespace: kube-system
  csi.storage.k8s.io/node-stage-secret-name: ceph-secret-user
  csi.storage.k8s.io/node-stage-secret-namespace: kube-system
  csi.storage.k8s.io/fstype: ext4
  # Templated volume naming - uses PVC name for predictable RBD image names
  external-reprovisioner.anoxape.org/enabled: "true"
  external-reprovisioner.anoxape.org/volume-name-template: ${pvc.name}
reclaimPolicy: Retain
allowVolumeExpansion: true
volumeBindingMode: Immediate
mountOptions:
  - discard
