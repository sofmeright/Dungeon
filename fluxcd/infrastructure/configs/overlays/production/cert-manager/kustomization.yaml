apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - ../../../base/cert-manager
  - gateway-certificates.yaml
patches:
  - path: clusterissuer-patch.yaml
    target:
      kind: ClusterIssuer
  # Set namespace for ExternalSecrets to king-of-red-lions (where cert-manager runs)
  - patch: |-
      - op: add
        path: /metadata/namespace
        value: king-of-red-lions
    target:
      kind: ExternalSecret
  # Set namespaces for gateway certificates to match their gateway locations
  - patch: |-
      - op: add
        path: /metadata/namespace
        value: arylls-lookout
    target:
      kind: Certificate
      name: pcfae-com-tls
  - patch: |-
      - op: add
        path: /metadata/namespace
        value: kokiri-forest
    target:
      kind: Certificate
      name: sofmeright-com-tls
  - patch: |-
      - op: add
        path: /metadata/namespace
        value: kokiri-forest
    target:
      kind: Certificate
      name: arbitorium-com-tls
  - patch: |-
      - op: add
        path: /metadata/namespace
        value: kokiri-forest
    target:
      kind: Certificate
      name: yesimvegan-com-tls
  - patch: |-
      - op: add
        path: /metadata/namespace
        value: hyrule-castle
    target:
      kind: Certificate
      name: prplanit-com-tls
  - patch: |-
      - op: add
        path: /metadata/namespace
        value: hyrule-castle
    target:
      kind: Certificate
      name: precisionplanit-com-tls
  - patch: |-
      - op: add
        path: /metadata/namespace
        value: hyrule-castle
    target:
      kind: Certificate
      name: optcp-com-tls
  - patch: |-
      - op: add
        path: /metadata/namespace
        value: hyrule-castle
    target:
      kind: Certificate
      name: ipleek-com-tls
  - patch: |-
      - op: add
        path: /metadata/namespace
        value: hyrule-castle
    target:
      kind: Certificate
      name: uni2-cc-tls
