apiVersion: postgresql.cnpg.io/v1
kind: Cluster
metadata:
  name: zitadel-postgres
spec:
  # pvcTemplate with 12Gi for static PVCs with named RBDs
  # CloudNativePG will use existing PVCs: zitadel-postgres-1, zitadel-postgres-2, zitadel-postgres-3
  storage:
    pvcTemplate:
      accessModes:
        - ReadWriteOnce
      resources:
        requests:
          storage: 12Gi
      storageClassName: ceph-rbd-retain

  postgresql:
    parameters:
      min_wal_size: "256MB"
      max_wal_size: "1GB"
