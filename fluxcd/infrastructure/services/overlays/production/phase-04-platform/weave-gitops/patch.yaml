apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: weave-gitops
spec:
  targetNamespace: gossip-stone
  valuesFrom:
    - kind: ConfigMap
      name: weave-gitops-values
      valuesKey: values.yaml
  values:
    image:
      repository: ghcr.io/weaveworks/wego-app
      tag: "v0.39.0-rc.2"
    service:
      type: ClusterIP
    resources:
      requests:
        cpu: 100m
        memory: 64Mi
      limits:
        cpu: 1
        memory: 512Mi
    securityContext:
      capabilities:
        drop:
          - ALL
      readOnlyRootFilesystem: true
      runAsNonRoot: true
      runAsUser: 1000
