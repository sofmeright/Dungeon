apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: netbird
  namespace: zeldas-lullaby
spec:
  parentRefs:
    - name: cell-membrane-gateway
      namespace: hyrule-castle
  hostnames:
    - "netbird.prplanit.com"
  rules:
    - matches:
        - path:
            type: PathPrefix
            value: /api
      backendRefs:
        - name: netbird-management
          port: 80
    - matches:
        - path:
            type: PathPrefix
            value: /management
      timeouts:
        request: 24h
      backendRefs:
        - name: netbird-management
          port: 80
    - matches:
        - path:
            type: PathPrefix
            value: /signalexchange
      timeouts:
        request: 24h
      backendRefs:
        - name: netbird-signal
          port: 80
    - matches:
        - path:
            type: PathPrefix
            value: /relay
      timeouts:
        request: 24h
      backendRefs:
        - name: netbird-relay
          port: 33080
    - matches:
        - path:
            type: PathPrefix
            value: /
      backendRefs:
        - name: netbird-dashboard
          port: 80
