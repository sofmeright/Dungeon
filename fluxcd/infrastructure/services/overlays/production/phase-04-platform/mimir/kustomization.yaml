apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: gossip-stone
resources:
  - ../../../../base/mimir
  - externalsecret-s3.yaml  # S3 credentials for Ceph RGW
  - bucket-init-job.yaml  # Create gossip-stone-mimir S3 bucket
  - cephfs-storage-pvs.yaml  # Static PVs/PVCs for CephFS storage
patches:
  - path: values-patch.yaml
    target:
      kind: HelmRelease
      name: mimir
