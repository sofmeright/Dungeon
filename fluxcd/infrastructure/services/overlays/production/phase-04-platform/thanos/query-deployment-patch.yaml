apiVersion: apps/v1
kind: Deployment
metadata:
  name: thanos-query
spec:
  replicas: 2
  template:
    spec:
      containers:
        - name: thanos-query
          args:
            - query
            - --log.level=info
            - --log.format=logfmt
            - --grpc-address=0.0.0.0:10901
            - --http-address=0.0.0.0:10902
            - --query.replica-label=receive_replica
            # Connect to Thanos Receive instances
            - --endpoint=dnssrv+_grpc._tcp.thanos-receive-discovery.gossip-stone.svc.cluster.local
