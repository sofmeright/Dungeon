apiVersion: v1
kind: Service
metadata:
  name: vault-lb
  namespace: zeldas-lullaby
  annotations:
    lbipam.cilium.io/ips: "172.22.30.86"
    lbipam.cilium.io/sharing-key: "zeldas-lullaby"
    lbipam.cilium.io/sharing-cross-namespace: "*"
    service.cilium.io/loadbalancer-mode: "dsr"
    gatus.home-operations.com/endpoint: |
      group: Infrastructure
      url: http://172.22.30.86:8200/v1/sys/health
      interval: 60s
      conditions:
        - "[STATUS] == 200"
spec:
  type: LoadBalancer
  externalTrafficPolicy: Cluster
  selector:
    app.kubernetes.io/name: vault
    vault_cr: vault
  ports:
    - port: 8200
      targetPort: 8200
      protocol: TCP
      name: api
