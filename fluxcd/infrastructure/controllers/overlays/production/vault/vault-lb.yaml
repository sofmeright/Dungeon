apiVersion: v1
kind: Service
metadata:
  name: vault-lb
  namespace: prplanit-atlas
  annotations:
    lbipam.cilium.io/ips: "172.22.30.102"
    lbipam.cilium.io/sharing-key: "prplanit-system"
    lbipam.cilium.io/sharing-cross-namespace: "*"
    service.cilium.io/loadbalancer-mode: "dsr"
spec:
  type: LoadBalancer
  externalTrafficPolicy: Local
  selector:
    app.kubernetes.io/name: vault
    vault_cr: vault
  ports:
    - port: 8200
      targetPort: 8200
      protocol: TCP
      name: api