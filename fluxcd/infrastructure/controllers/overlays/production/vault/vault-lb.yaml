apiVersion: v1
kind: Service
metadata:
  name: vault-lb
  namespace: prplanit-atlas
  annotations:
    io.cilium/lb-ipam-ips: "172.22.30.102"
    io.cilium/lb-ipam-sharing-key: "prplanit-system"  # Enable IP sharing
spec:
  type: LoadBalancer
  externalTrafficPolicy: Local
  selector:
    app.kubernetes.io/name: vault
    vault_cr: vault
  ports:
    - port: 8200
      targetPort: 8200
      protocol: TCP
      name: api