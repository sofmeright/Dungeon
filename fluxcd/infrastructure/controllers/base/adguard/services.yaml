apiVersion: v1
kind: Service
metadata:
  name: adguard-dns
  namespace: prplanit-dns
  annotations:
    io.cilium/lb-ipam-ips: "172.22.30.122"
    io.cilium/lb-ipam-sharing-key: "infrastructure-services"
spec:
  type: LoadBalancer
  loadBalancerIP: 172.22.30.122
  ports:
  - port: 53
    targetPort: 53
    protocol: TCP
    name: dns-tcp
  - port: 53
    targetPort: 53
    protocol: UDP
    name: dns-udp
  - port: 853
    targetPort: 853
    protocol: TCP
    name: dns-tls
  selector:
    app: adguard
---
apiVersion: v1
kind: Service
metadata:
  name: adguard-web
  namespace: prplanit-dns
  annotations:
    io.cilium/lb-ipam-ips: "172.22.30.122"
    io.cilium/lb-ipam-sharing-key: "infrastructure-services"
spec:
  type: LoadBalancer
  loadBalancerIP: 172.22.30.122
  ports:
  - port: 8080
    targetPort: 80
    protocol: TCP
    name: web
  selector:
    app: adguard