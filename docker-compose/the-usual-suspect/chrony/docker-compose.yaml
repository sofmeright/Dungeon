services:
  chrony:
    image: simonrupf/chronyd:0.7.0
    # cap_add:
      # - SYS_TIME
    container_name: chrony
    #devices:
    #   - /dev/ptp0:/dev/ptp0
    environment:
      # - ENABLE_NTS=true
      # - ENABLE_SYSCLK=true
      - LOG_LEVEL=0
      #- NOCLIENTLOG=true
      - NTP_SERVERS="0.us.pool.ntp.org,1.us.pool.ntp.org,2.us.pool.ntp.org,3.us.pool.ntp.org,2.debian.pool.ntp.org,the-usual-suspect,homing-pigeon,avocado,bamboo,cosmos,dragonfruit,eggplant"
      - TZ=Etc/UTC
    network_mode: bridge
    ports:
      - 123:123/udp
    read_only: true
    restart: always
    tmpfs:
      - /etc/chrony:rw,mode=1750,uid=100,gid=101
      - /run/chrony:rw,mode=1750,uid=100,gid=101
      - /var/lib/chrony:rw,mode=1750,uid=100,gid=101
    # if you'd like chronyd to synchronize your hosts clock (ENABLE_SYSCLK=true & cap_add: SYS_TIME), set the user to root.
    # user: "0:0"
    #volumes:
      #- /opt/docker/chrony/chrony.conf:/etc/chrony/chrony.conf
      #- /opt/docker/chrony/chrony.keys:/etc/chrony/chrony.keys

