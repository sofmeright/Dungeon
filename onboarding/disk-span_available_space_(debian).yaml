---
- name: Preparing to extend {{ sfmr_target_host }}'s disk to span available space.
  hosts: "{{ sfmr_target_host }}"
  become: true
  tasks: 

    - name: "Extend the partition to span the entire disk."
      command: “sudo growpart {{ sfmr_target_disk }}”

    - name: "Extend the PV to span the entire disk."
      command: “sudo pvresize {{ sfmr_target_disk }}”

    - name: Extend the LVM to span the entire disk.
      lvol:
        vg: “ubuntu-vg”
        lv: “ubuntu-lv”
        size: +100%FREE
        resizefs: true

    - name: "Resize the filesystem without rebooting {{ sfmr_target_host }}."
      command: “sudo resize2fs /dev/ubuntu-vg/ubuntu-lv”