---
- name: Installing oh my zsh shell and powerlevel10k.
  hosts: linux
  become: true
  tasks: 
  - name: Stage I of IV - Installing zsh and dependencies - git-core, curl, fonts-powerline.
    apt:
      name:
      - git-core 
      - curl 
      - fonts-powerline
      - zsh
      state: present
      update_cache: yes # Simulate apt-update on the first run.
  - name: Stage II of IV - Transfer preferred config for zsh.
    ansible.builtin.get_url:
      url: https://gitlab.prplanit.com/precisionplanit/ant_parade-public/-/raw/main/hosts/_linux/oh-my-zsh/.zshrc
      dest: /home/{{ ansible_user_id }}/.zshrc
      mode: '0664'
      owner: '{{ ansible_user_id }}'
      group: '{{ ansible_user_id }}'
  - name: Stage III of IV - Transfer preferred config for powerlevel10k.
    ansible.builtin.get_url:
      url: https://gitlab.prplanit.com/precisionplanit/ant_parade-public/-/raw/main/hosts/_linux/oh-my-zsh/.p10k.zsh
      dest: /home/{{ ansible_user_id }}/.p10k.zsh
      mode: '0664'
      owner: '{{ ansible_user_id }}'
      group: '{{ ansible_user_id }}'
  - name: Stage IV of IV - (Attempt) Install the oh-my-zsh plugin.
    ansible.builtin.shell: sh -c $(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)